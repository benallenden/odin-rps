<script>
    // string method prototype that returns a string in title case
    String.prototype.toTitleCase = function () {
        return this.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});
    }

    // returns a random int between 1 and max
    function getRandInt(max) {
        return Math.floor(Math.random() * max) + 1;         
    }
    
    function getComputerChoice() {
        let choice = getRandInt(3)
        if (choice == 1) {
            return "Rock"
        } else if (choice == 2) {
            return "Paper"
        } else {
            return "Scissors"
        }
    }
    
    // returns a message along with: 3 if player wins, 2 if computer wins, 1 if tie, 0 if error
    function playRound(playerSelection) {
        const computerSelection = getComputerChoice()
        

        const msgWin = `You Win! ${playerSelection} beats ${computerSelection}`
        const msgLose = `You Lose! ${computerSelection} beats ${playerSelection}`
        const msgTie = "Tie!"
        const msgError = "Error"

        if (playerSelection == "Rock") {
            if (computerSelection == "Scissors") {
                return [msgWin, 3]
            } else if (computerSelection == "Paper") {
                return [msgLose, 2]
            } else {
                return [msgTie, 1]
            }
        } else if (playerSelection == "Paper") {
            if (computerSelection == "Rock") {
                return [msgWin, 3]
            } else if (computerSelection == "Scissors") {
                return [msgLose, 2]
            } else {
                return [msgTie, 1]
            }
        } else if (playerSelection == "Scissors") {
            if (computerSelection == "Paper") {
                return [msgWin, 3]
            } else if (computerSelection == "Rock") {
                return [msgLose, 2]
            } else {
                return [msgTie, 1]
            }
        } else {
            return [msgError, 0]
        }
    }

    function obtainInput() {
        do {
            var tmp = window.prompt("Enter your Rock Paper Scissors choice: ")
            var userInput = tmp.toTitleCase()
        } while (userInput != "Rock" && userInput != "Paper" && userInput != "Scissors") 
        return userInput
    }

    function game() {
        var player = 0
        var computer = 0

        const games = window.prompt("Number of games: ")
        for(let i = 0; i < games; i++) {
            playerSelection = obtainInput()
            result = playRound(playerSelection)
            console.log(result[0])

            if (result[1] == 3) {
                player++
            } else if (result[1] == 2) {
                computer++
            } else if (result[1] == 1) {
                //i--
                continue
            } else {
                break
            }
        }
        if (player > computer) {
            console.log("You have won!")
        } else if (computer > player) {
            console.log("You have lost.")
        } else {
            console.log("It's a tie!")
        }
        console.log("Player %i - %i Computer", player, computer) 
    }
</script>